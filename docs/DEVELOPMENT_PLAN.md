# 项目开发计划与进度文档

本文档基于 `docs/项目文档.md`，用于追踪项目当前开发进度、已实现功能、待开发功能及未来规划。请根据此文档进行后续开发。

**更新日期：** 2025-12-06

---

## 1. 功能完成度概览

### ✅ 已实现功能 (Done)

#### 核心功能
*   **习惯管理**
    *   [x] 创建习惯 (名称、目标描述、每日目标次数、分类)。
    *   [x] 习惯列表展示 (今日计划)。
    *   [x] 习惯打卡 (支持多次打卡/累加值)。
    *   [x] 习惯归档/删除。
    *   [x] 习惯详情页 (查看基本信息)。
*   **待办事项 (Todo)**
    *   [x] 创建待办 (内容、备注、分类、关联习惯)。
    *   [x] 设置截止日期与时间。
    *   [x] 设置提醒通知 (基于 `expo-notifications`)。
    *   [x] 待办列表展示 (今日待办)。
    *   [x] 待办完成/取消完成。
    *   [x] 编辑与删除待办。
    *   [x] **待办时间轴 (Timeline)**：独立页面展示今日所有待办的时间轴视图，支持按时间排序。
*   **专注功能 (Focus)**
    *   [x] 番茄钟倒计时 (Focus Timer)。
    *   [x] 快速预设时间 (5/15/25/45/60分钟)。
    *   [x] 开始/暂停/重置/结束震动反馈。

#### 数据与视图
*   **日程视图 (Calendar)**
    *   [x] 月视图日历 (支持农历显示)。
    *   [x] 选中日期查看当日习惯与待办。
    *   [x] 任务条形展示 (颜色区分习惯与待办)。
    *   [x] 日历导航 (上/下月切换)。
*   **数据统计 (Stats)**
    *   [x] 基础概览 (习惯总数、今日完成数、完成率)。
    *   [x] 近7天完成趋势 (柱状图)。
    *   [x] 待办概览与时间轴入口。

#### 系统与设置
*   **数据安全**
    *   [x] 数据导出 (JSON格式备份)。
    *   [x] 数据导入 (从备份恢复)。
*   **用户体验**
    *   [x] 深色模式/浅色模式切换。
    *   [x] 响应式布局 (适配安全区域，包含 Notch/Dynamic Island)。
    *   [x] **性能优化**：页面切换流畅度优化 (使用 `InteractionManager` 和数据缓存)。
*   **构建与发布**
    *   [x] Android APK 打包 (基于 Expo EAS Build)。


---

## 2. 待开发功能 (To Do)

以下功能尚未实现或需要优化，按优先级排序：

### 🚀 P0: 核心体验补全 (High Priority)
1.  **习惯的高级设置**
    *   [x] **频率选择 UI**：目前数据库支持 `daily`/`weekly`/`specific_days`，但前端 `AddHabitScreen` 尚未提供选择界面，默认为每日。
    *   [x] **习惯提醒**：目前仅待办支持提醒，习惯尚未支持设置固定提醒时间。
2.  **习惯记录的精细化**
    *   [x] **历史记录编辑**：在详情页查看历史打卡记录，并支持补卡或修改数值。
    *   [x] **打卡备注/图片**：打卡时支持上传图片或添加心情备注。
3.  **统计增强**
    *   [x] **热力图 (Heatmap)**：在详情页或统计页展示年度打卡热力图（类似 GitHub）。
    *   [x] **坚持力分析**：计算并展示“当前连续打卡天数”和“历史最高连续天数”。

### 🌟 P1: 激励与游戏化 (Medium Priority)
1.  **成就系统**
    *   [ ] 设计并实现成就徽章 (如: 连续7天、完成100次等)。
    *   [ ] 弹窗祝贺动画。
2.  **成长记录**
    *   [ ] 自动生成的里程碑时间轴。

### 🛠 P2: 工具与扩展 (Low Priority)
1.  **桌面小组件 (Widget)**
    *   [ ] (需调研 Expo Config Plugin 或 EAS Build) 桌面打卡快捷入口。
2.  **更多图表**
    *   [ ] 习惯进度矩阵图。
    *   [ ] 月度报告生成。

---

## 3. 技术债务与优化

*   **代码重构**
    *   `useHabitStore` 和 `useTodoStore` 中的数据获取逻辑可进一步优化性能，避免全量刷新。
    *   统一颜色变量和主题管理。
*   **数据库**
    *   确保 SQLite 在大量数据下的查询性能 (添加索引)。
*   **测试**
    *   添加单元测试 (Jest) 和集成测试。

---

## 4. 下一步开发建议

建议优先完成 **P0: 习惯的高级设置**，特别是 **频率选择** 和 **习惯提醒**，这将直接完善核心的习惯养成体验。

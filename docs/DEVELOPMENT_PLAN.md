# 项目开发计划与进度文档

本文档基于 `docs/项目文档.md`，用于追踪项目当前开发进度、已实现功能、待开发功能及未来规划。请根据此文档进行后续开发。

**更新日期：** 2025-12-07

---

## 1. 功能完成度概览

### ✅ 已实现功能 (Done)

#### 核心功能
*   **习惯管理**
    *   [x] 创建习惯 (名称、目标描述、每日目标次数、分类)。
    *   [x] 习惯列表展示 (今日计划)。
    *   [x] 习惯打卡 (支持多次打卡/累加值)。
    *   [x] 习惯归档/删除。
    *   [x] 习惯详情页 (查看基本信息)。
    *   [x] **高级设置**：支持频率选择 (每日/每周/特定日) 和习惯提醒。
    *   [x] **记录精细化**：详情页查看/编辑历史记录，打卡支持备注和图片。
*   **待办事项 (Todo)**
    *   [x] 创建待办 (内容、备注、分类、关联习惯)。
    *   [x] 设置截止日期与时间。
    *   [x] 设置提醒通知 (基于 `expo-notifications`)。
    *   [x] 待办列表展示 (今日待办)。
    *   [x] 待办完成/取消完成 (记录打卡时间 `completedAt`)。
    *   [x] 编辑与删除待办。
    *   [x] **待办时间轴 (Timeline)**：独立页面展示今日所有已完成待办和习惯打卡记录，按打卡时间排序。
*   **专注功能 (Focus)**
    *   [x] 番茄钟倒计时 (Focus Timer)。
    *   [x] 快速预设时间 (5/15/25/45/60分钟)。
    *   [x] 开始/暂停/重置/结束震动反馈。

#### 数据与视图
*   **日程视图 (Calendar)**
    *   [x] 月视图日历 (支持农历显示)。
    *   [x] 选中日期查看当日习惯与待办。
    *   [x] 任务条形展示 (颜色区分习惯与待办)。
    *   [x] 日历导航 (上/下月切换)。
*   **数据统计 (Stats)**
    *   [x] 基础概览 (习惯总数、今日完成数、完成率)。
    *   [x] 近7天完成趋势 (柱状图)。
    *   [x] **高级统计**：年度打卡热力图 (Heatmap) 与坚持力分析 (连续打卡天数)。

#### 系统与设置
*   **数据安全**
    *   [x] 数据导出 (JSON格式备份)。
    *   [x] 数据导入 (从备份恢复)。
*   **用户体验 (UX)**
    *   [x] 深色模式/浅色模式切换。
    *   [x] 响应式布局 (适配安全区域，包含 Notch/Dynamic Island)。
    *   [x] **性能优化**：
        *   页面切换流畅度优化 (使用 `InteractionManager`)。
        *   **习惯详情页**：采用渐进式渲染 (Progressive Rendering) 和骨架屏，解决数据加载卡顿问题。
    *   [x] **动画交互**：首页选项卡 (Tab) 下划线跟随页面滑动实时过渡。
    *   [x] **音效反馈**：待办完成与习惯打卡时播放提示音 (支持本地离线资源)。
    *   [x] **UI 细节优化**：修复 TodoModal 在深色模式下的边框显示问题，同时保持浅色模式满屏宽度。
*   **构建与发布**
    *   [x] Android APK 打包 (基于 Expo EAS Build)。

---

## 2. 待开发功能 (To Do)

以下功能尚未实现或需要优化，按优先级排序：

### 🌟 P1: 激励与游戏化 (Medium Priority)
1.  **成就系统**
    *   [ ] 设计并实现成就徽章 (如: 连续7天、完成100次等)。
    *   [ ] 弹窗祝贺动画。
2.  **成长记录**
    *   [ ] 自动生成的里程碑时间轴。

### 🛠 P2: 工具与扩展 (Low Priority)
1.  **桌面小组件 (Widget)**
    *   [ ] (需调研 Expo Config Plugin 或 EAS Build) 桌面打卡快捷入口。
2.  **更多图表**
    *   [ ] 习惯进度矩阵图。
    *   [ ] 月度报告生成。

---

## 3. 技术债务与优化

*   **代码重构**
    *   `useHabitStore` 和 `useTodoStore` 中的数据获取逻辑可进一步优化性能，避免全量刷新。
    *   统一颜色变量和主题管理。
*   **数据库**
    *   确保 SQLite 在大量数据下的查询性能 (添加索引)。
*   **测试**
    *   添加单元测试 (Jest) 和集成测试。

---

## 4. 下一步开发建议

目前核心功能已基本完备，建议开始着手 **P1: 激励与游戏化** 功能，增加用户的粘性。同时持续关注性能表现，特别是在数据量增长后的列表渲染性能。
